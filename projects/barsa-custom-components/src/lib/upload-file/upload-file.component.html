<div fd-panel-content ariaLabel="Panel Content" id="panel-content-1">
  <ng-container *ngIf="value2.length">
    <div class="image-container">
      <ng-container *ngFor="let item of value2">
        <div *ngIf="!item.IsDeleted">
          <fd-card>
            <fd-action-sheet>
              <fd-action-sheet-control>
                <li fd-action-sheet-item glyph="settings"></li>
              </fd-action-sheet-control>

              <fd-action-sheet-body
                actionSheetBodyId="fd-action-sheet-default-body"
                ariaLabelledby="fd-action-sheet-default-control"
                class="icons"
              >
                <i
                  class="red"
                  fd-action-sheet-item
                  [label]="'Delete' | bbbTranslate"
                  glyph="delete"
                  (click)="onDeleteFile(item.Id)"
                ></i>
                <i
                  class="red"
                  fd-action-sheet-item
                  [label]="'Save' | bbbTranslate"
                  glyph="save"
                  (click)="onDownloadFile(item.Id)"
                ></i>
              </fd-action-sheet-body>
            </fd-action-sheet>
            <img
              class="cursor-pointer"
              *ngIf="!item.icon"
              [src]="item.url"
              [alt]="item.FileName"
              (click)="openLightBox(item.url)"
            />
            <img *ngIf="item.icon" [src]="item.icon" [alt]="item.FileName" />
            <div class="file-name-container">
              <p>{{ item.FileName }}</p>
            </div>
          </fd-card>
        </div>
      </ng-container>
    </div>
  </ng-container>

  <ng-container *ngIf="!hasReachedMaxCount">
    <ng-container *ngTemplateOutlet="uploadTemplate"></ng-container>
  </ng-container>
</div>

<fd-file-uploader
  #uploader
  fd-toolbar-item
  [style.display]="'none'"
  [id]="id"
  [name]="'uploader_' + id"
  [placeholder]="'AttachPicture' | bbbTranslate"
  [buttonLabel]="'AttachPicture' | bbbTranslate"
  [buttonAriaLabel]="'AttachPicture' | bbbTranslate"
  [accept]="validExtension"
  [(ngModel)]="files"
  [multiple]="false"
  (selectedFilesChanged)="onFileSelection($event)"
></fd-file-uploader>

<ng-template #uploadTemplate>
  <div class="upload-container">
    <h5>{{ context.Setting.CustomUi.Parameters.Title }}</h5>
    <div class="w-6">
      <bcc-skeleton-loader
        [type]="
          SkeletonsTypes[context.Setting.CustomUi.Parameters.TypeOfSkeleton]
        "
      ></bcc-skeleton-loader>
    </div>
    <button fd-button label="آپلود" (click)="uploader.open()"></button>
  </div>
</ng-template>

<div class="lightbox" *ngIf="lightBox.open" (click)="lightBox.open = false">
  <span style="background-image: url('{{ lightBox.src }}')"></span>
</div>
